!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var n=t();for(var i in n)("object"==typeof exports?exports:e)[i]=n[i]}}(window,(function(){return function(e){var t={};function n(i){if(t[i])return t[i].exports;var s=t[i]={i:i,l:!1,exports:{}};return e[i].call(s.exports,s,s.exports,n),s.l=!0,s.exports}return n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)n.d(i,s,function(t){return e[t]}.bind(null,s));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=4)}([function(e,t,n){"use strict";const i=e=>{const{title:t,url:n,isDesktop:i,styles:s}=e;return`<a\n      class="universal-notice js-universal-notice-notice"\n      href="${n}"\n      target="_blank"\n      style="${s}"\n    >\n      <div class="universal-notice__wrapper">\n        <b class="universal-notice__title">\n          ${t}\n        </b>\n\n        ${i?'<p class="universal-notice__timer js-universal-notice-timer js-universal-notice-active">\n              <span class="universal-notice__days js-universal-notice-days"></span>\n              <span class="js-universal-notice-hours"></span>\n              :<span class="js-universal-notice-minutes"></span>\n              :<span class="js-universal-notice-seconds"></span>\n            </p>':""}\n\n        <span class="universal-notice__button">Выбрать курс</span>\n      </div>\n    </a>`};window.dataLayer=window.dataLayer||[];const s=e=>{switch(e){case"sale":dataLayer.push({event:"banner.click",details:{category:"banner.click",action:"click"}});break;case"universal":dataLayer.push({event:"salebanner.click",details:{category:"salebanner.click",action:"click"}})}},r=e=>{const t=document.createElement("div");return t.innerHTML=e,t.firstChild};class o{constructor(){if(new.target===o)throw new Error("Cannot instantiate AbstractView, only concrete one");this._element=null}getTemplate(){throw new Error("Template is required")}getElement(){return null===this._element&&(this._element=this.render(),this.bind()),this._element}render(){return r(this.getTemplate())}bind(){}unbind(){}unrender(){this.unbind(),this.getElement().remove(),this._element=null}}var a=o;const c={day:["день","дня","дней"]},l=e=>e>=10?e:`0${e}`,h=e=>{let t=e/1e3,n=t/60,i=n/60,s=i/24;return{days:s=Math.floor(s),hours:i=Math.floor(i-24*s),minutes:n=Math.floor(n-60*i-1440*s),seconds:t=Math.floor(t-60*n-3600*i-86400*s)}},u=(e,t,n,i,s)=>{const{days:r,hours:o,minutes:a,seconds:h}=e;t.textContent=`${r} ${((e,t)=>{const n=t%100,i=n%10;return 11!==n&&1===i?c[e][0]:i>=2&&i<=4&&(n<10||n>20)?c[e][1]:c[e][2]})("day",r)}`,n.textContent=l(o),i.textContent=l(a),s.textContent=l(h)},d=(e,t)=>{const n=e.querySelector(".js-universal-notice-days"),i=e.querySelector(".js-universal-notice-hours"),s=e.querySelector(".js-universal-notice-minutes"),r=e.querySelector(".js-universal-notice-seconds");let o=null;u(t,n,i,s,r),e.classList.add("js-universal-notice-active"),o=setInterval(()=>{t.seconds?--t.seconds:t.minutes?(--t.minutes,t.seconds=59):t.hours?(--t.hours,t.minutes=59):t.days?(--t.days,t.hours=24):(clearInterval(o),e.classList.remove("js-universal-notice-active")),u(t,n,i,s,r)},1e3)},_=new Promise(e=>{const t=new Image;t.onload=t.onerror=()=>{e(2===t.height)},t.src="data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA"});let p=!1;_.then(e=>p=e);var m=class extends a{constructor(e){super(),this._data=e,this._endDate=this._data.end_date,this._bannerType=window.bannerType||"universal",this._bannerDirection=window.directionForBanner?`${window.directionForBanner}/`:"",this._root=document.querySelector("body"),this._pageScrollHandler=this._pageScrollHandler.bind(this),this._isWebp=p,this._isBitrix=window.location.href.includes("skillbox.ru/media/")}_getImageSrc(e){return this._isWebp?e.webp:e.img}_setModifier(e){this.getElement().classList.add(`universal-notice--${e}`)}_setTimer(){const e=this.getElement().querySelector(".js-universal-notice-timer"),t=new Date(this._endDate)-new Date;t>0?d(e,h(t)):e.classList.remove("js-universal-notice-active")}_pageScrollHandler(){const e=Math.trunc(this.getElement().getBoundingClientRect().bottom),t=Math.trunc(this._root.getBoundingClientRect().bottom);this.getElement().style.opacity=e+15>=t?0:1}};t.a=class extends m{constructor(e){super(e),this._onClickBanner=this._onClickBanner.bind(this),this._isDesktop=window.innerWidth>=1280,this.isVisible=!1,this.bannerHeight=0,this._templateData={title:this._data.title_short,url:`${this._data.url}${this._bannerDirection}`,isDesktop:this._isDesktop,styles:`--banner-bg: ${this._data.background_color};`+`--banner-color: ${this._data.dark_mode?"#fff":"#000"};`+`--button-font-color: ${this._data.btn_font_color};`+`--button-bg-color: ${this._data.btn_background_color};`+`--banner-img-left: url(${this._getImageSrc(this._data.images.picture_left)});`+`--banner-img-center: url(${this._getImageSrc(this._data.images.picture_center)});`+`--banner-img-right: url(${this._getImageSrc(this._data.images.picture_right)});`}}getTemplate(){return i(this._templateData)}start(){this._isDesktop&&this._setTimer(),this._isBitrix&&this._setModifier("bitrix"),this._root.prepend(this.getElement()),this.show(),window.dataLayer&&window.dataLayer.push({event:"mainEvent",category:"Banner",action:"Banner initialized",label:"standard",page_host:window.location.hostname,page_path:window.location.pathname,url:this._data.url}),this.bannerHeight=this.getElement().offsetHeight,this._root.style.setProperty("--universal-notice-height",`${this.bannerHeight}px`),this._root.dispatchEvent(new Event("promo-banner-loaded"))}show(){this.isVisible=!0,this.getElement().classList.add("universal-notice--active")}hide(){this.isVisible=!1,this.getElement().classList.remove("universal-notice--active")}bind(){this.getElement().addEventListener("click",this._onClickBanner),window.addEventListener("scroll",this._pageScrollHandler)}unbind(){this.getElement().removeEventListener("click",this._onClickBanner),window.removeEventListener("scroll",this._pageScrollHandler)}_onClickBanner(){window.dataLayer&&window.dataLayer.push({event:"mainEvent",category:"Banner",action:"Go to sale",label:"standard",page_host:window.location.hostname,page_path:window.location.pathname,url:this._data.url}),s(this._bannerType)}}},,function(e){e.exports=JSON.parse('{"activators":[{"regexp":"^/(.*)","part":"pathname"}],"excludes":[]}')},,function(e,t,n){"use strict";n.r(t),n.d(t,"BannerPlugin",(function(){return r})),n.d(t,"fetchConfig",(function(){return o}));var i=n(0);var s=n(2);const r=class{constructor(e={}){this._activators=e.activators||[],this._excludes=e.excludes||[],this._project=e.project||"main",this._baseDomain=e.isProduction?"https://skillbox.ru":"https://ldev.skillbox.ru",this.onCreate=null,this.onHide=null,this.onShow=null,this.onRouteChange=null,this.banner=null,this._init()}async _init(){this._toggle()}_createBanner(){return new Promise((e,t)=>{fetch(`${this._baseDomain}/api/v6/ru/sales/${this._project}/announcements/universal-notice/`).then(e=>e.json()).then(({data:t})=>{const n=document.createElement("style");n.innerHTML='@font-face{font-display:swap;font-family:Graphik;font-weight:500;font-style:normal;src:url(https://248006.selcdn.ru/Shared/fonts/GraphikLCTT-VA-Medium.woff2) format("woff2")}@font-face{font-display:swap;font-family:Graphik;font-weight:700;font-style:normal;src:url(https://248006.selcdn.ru/Shared/fonts/GraphikLCTT-VA-Bold.woff2) format("woff2")}.universal-notice{position:-webkit-sticky;position:sticky;z-index:5;top:0;box-sizing:border-box;text-decoration:none;display:none;-webkit-box-pack:justify;justify-content:space-between;overflow:hidden;color:var(--banner-color);background-color:var(--banner-bg);font-family:Graphik,sans-serif;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;-webkit-transition:opacity .25s ease-in-out;transition:opacity .25s ease-in-out}.universal-notice--active{display:-webkit-box;display:flex}.universal-notice--bitrix{z-index:1000}.universal-notice *,.universal-notice ::after,.universal-notice ::before{box-sizing:inherit}.universal-notice::after,.universal-notice::before{display:none;width:250px;height:72px;content:"";background-size:250px 72px;background-repeat:no-repeat}.universal-notice::before{background-image:var(--banner-img-left);background-position:right center}.universal-notice::after{background-image:var(--banner-img-right);background-position:left center}.universal-notice__wrapper{display:grid;grid-template-columns:115px 53px 120px;grid-gap:4px;flex-shrink:0;-webkit-box-align:center;align-items:center;min-height:56px;margin:0 auto;padding:0 12px}.universal-notice__wrapper::after{grid-column:2/3;grid-row:1/2;display:block;width:100%;height:100%;background-image:var(--banner-img-center);background-size:cover;background-repeat:no-repeat;content:""}.universal-notice__title{font-weight:600;font-size:14px;line-height:120%;text-transform:uppercase}.universal-notice__timer{display:none;margin:0;font-feature-settings:"tnum";font-variant-numeric:tabular-nums;font-weight:600;font-size:24px;line-height:32px}.universal-notice__days{margin-right:20px}.universal-notice__button{grid-column:3/4;flex-shrink:0;padding:13px 12px;border-radius:6px;color:var(--button-font-color);background-color:var(--button-bg-color);font-weight:500;font-size:14px;line-height:1}@media (min-width:460px) and (max-width:0px){.universal-notice__wrapper{grid-template-columns:114px 194px 120px}}@media (min-width:460px){.universal-notice__wrapper{grid-template-columns:114px 194px 120px}}@media (min-width:460px) and (max-width:767.9px){.universal-notice__wrapper::after{background-image:var(--banner-img-left)}}@media (min-width:768px){.universal-notice::after,.universal-notice::before{display:block}.universal-notice__wrapper{grid-template-columns:236px 68px 172px;width:524px;min-height:72px;padding:0 20px}.universal-notice__title{font-size:24px;line-height:110%}.universal-notice__button{padding:14px 32px;font-size:16px}}@media (min-width:768px) and (max-width:0px){.universal-notice::after,.universal-notice::before{display:block}.universal-notice__wrapper{grid-template-columns:236px 68px 172px;width:524px;min-height:72px;padding:0 20px}.universal-notice__title{font-size:24px;line-height:110%}.universal-notice__button{padding:14px 32px;font-size:16px}}@media (min-width:1024px){.universal-notice__title{font-size:24px}}@media (min-width:1024px) and (max-width:0px){.universal-notice__title{font-size:24px}}@media (min-width:1280px){.universal-notice__wrapper{grid-template-columns:396px 68px 1fr 172px;width:940px}.universal-notice__title{line-height:32px}.universal-notice__timer.js-universal-notice-active{display:-webkit-box;display:flex}.universal-notice__button{grid-column:4/5}}@media (min-width:1280px) and (max-width:0px){.universal-notice__wrapper{grid-template-columns:396px 68px 1fr 172px;width:940px}.universal-notice__title{line-height:32px}.universal-notice__timer.js-universal-notice-active{display:-webkit-box;display:flex}.universal-notice__button{grid-column:4/5}}@media (max-width:767.9px){.universal-notice__wrapper{-webkit-box-pack:justify;justify-content:space-between;width:100%}}@media (max-width:767.9px) and (max-width:0px){.universal-notice__wrapper{-webkit-box-pack:justify;justify-content:space-between;width:100%}}',document.body.append(n),this.banner=new i.a(t),e(this.banner)}).catch(e=>{t(e)})})}_toggle(){return this.banner||!this._checkActivators()||this._checkExcludes()?this.banner&&this.banner.isVisible&&this._checkExcludes()?this.hide():this.banner&&!this.banner.isVisible&&this._checkActivators()&&!this._checkExcludes()?this.show():void 0:this._createBanner().then(()=>{this.banner.start(),this._onCreate()})}show(){this.banner.show(),this._onShow()}hide(){this.banner.hide(),this._onHide()}_onCreate(){"function"==typeof this.onCreate&&this.onCreate()}_onHide(){"function"==typeof this.onHide&&this.onHide()}_onShow(){"function"==typeof this.onShow&&this.onShow()}_onRouteChange(){"function"==typeof this.onRouteChange&&this.onRouteChange()}routeChangeHandler(){return this._toggle(),this._onRouteChange(),this.banner}_checkActivators(){return this._checkTriggers(this._activators)}_checkExcludes(){return this._checkTriggers(this._excludes)}_checkTriggers(e){return e.map(e=>{const t=window.location[e.part];return new RegExp(e.regexp).test(t)}).some(e=>!!e)}},o=(e,t=!0)=>{const n=new class{constructor(e,t=!0){var n,i,s;s=5e3,(i="FETCH_TIMEOUT")in(n=this)?Object.defineProperty(n,i,{value:s,enumerable:!0,configurable:!0,writable:!0}):n[i]=s,this.setPathToCdn(e,t),this.setErrors()}setPathToCdn(e,t){const n=t?"":"-dev";this.pathToCdn=`https://248006.selcdn.ru/frontend-libs${n}/promo-banner/configs/${e}.json`}setErrors(){this.errorFetch=`[Promo banner]: Не удалось получить json - ${this.pathToCdn}`,this.timeoutFetch=`[Promo banner]: Не удалось получить json в течении ${this.FETCH_TIMEOUT} мс - ${this.pathToCdn}`}}(e,t);let i;return new Promise((e,t)=>{i=setTimeout(()=>t(n.timeoutFetch),n.FETCH_TIMEOUT),fetch(n.pathToCdn).then(e=>e.json()).then(t=>{e(t)}).catch(e=>{t(n.errorFetch)}).finally(()=>{clearTimeout(i)})}).then(e=>({error:null,config:e})).catch(e=>(clearTimeout(i),{error:e,config:s}))}}])}));